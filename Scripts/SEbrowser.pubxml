<?xml version="1.0" encoding="utf-8"?>

<!--
*******************************************************************************************************
**  SEBrowser.buildproj - Gbtc
**
**  Copyright © 2021, Grid Protection Alliance.  All Rights Reserved.
**
**  Licensed to the Grid Protection Alliance (GPA) under one or more contributor license agreements. See
**  the NOTICE file distributed with this work for additional information regarding copyright ownership.
**  The GPA licenses this file to you under the Eclipse Public License -v 1.0 (the "License"); you may
**  not use this file except in compliance with the License. You may obtain a copy of the License at:
**
**      http://www.opensource.org/licenses/eclipse-1.0.php
**
**  Unless agreed to in writing, the subject software distributed under the License is distributed on an
**  "AS-IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. Refer to the
**  License for the specific language governing permissions and limitations.
**
**  Code Modification History:
**  ===================================================================================================
**  06/01/2021 - C. Lackner
**       Created Intiial Profile
**
*******************************************************************************************************
-->

<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <Import Project="PublishProfile.pubxml"/>

  <Target Name="BeforePrepareSettings">
    <PropertyGroup>
      <!--Must-override setting(s).-->
      <ProjectName>SEBrowser</ProjectName>
      <ProjectSolution>$(LocalFolder)\SEBrowser.sln</ProjectSolution>
      
      <VersionMajorChange>None</VersionMajorChange>
      <VersionMinorChange>None</VersionMinorChange>
      <VersionBuildChange>Increment</VersionBuildChange>
      <VersionRevisionChange>None</VersionRevisionChange>

      <!-- Override default settings. -->
      <GitServer Condition="'$(GitServer)' == ''">git@github.com:GridProtectionAlliance/SEBrowser.git</GitServer>
    </PropertyGroup>
  </Target>

  <Target Name="BeforeBuildProjects">
	 <PropertyGroup>
		<PowerShellExe Condition=" '$(PowerShellExe)'=='' ">%WINDIR%\System32\WindowsPowerShell\v1.0\powershell.exe</PowerShellExe>
	</PropertyGroup>
	<Exec Command="$(PowerShellExe) -NonInteractive -executionpolicy Unrestricted -command &quot;&amp; { &amp;&apos;$(LocalFolder)\Scripts\BuildTSX.ps1&apos; &apos;$(LocalFolder)\SEBrowser&apos; } &quot;" />
    <ItemGroup>
      <!--List of projects to build.-->
      <ProjectsToBuild Include="$(ProjectSolution)"/>
    </ItemGroup>
  </Target>

  <Target Name="BeforeDeployBuild">
    <!--Directories containing help files.-->
   
    
    <!--Move the SQL database file to the build output folder.-->
    <Copy SourceFiles="@(BinariesToArchive)" DestinationFolder="$(BuildOutputFolder)\Applications\SEBrowser\"/>
     
	 
	 
    <ItemGroup>
      <!--List of source code files to archive.-->
      <SourcesToArchive Include="$(LocalFolder)\Source\**\*.*" Exclude="$(LocalFolder)\Source\**\obj\**\*.*"/>
    
      <!--List of binaries to archive.-->
      
      
      <!-- List of installs to archive. -->
    
      <!--Destinations of archive files (*.zip).-->
      <ArchiveDestinations Include="$(BuildDeployFolder)"/>
    </ItemGroup>
  </Target>
</Project>