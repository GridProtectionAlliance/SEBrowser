!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.typestyle=t():e.typestyle=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";(function(e){function n(e){return e.replace(y,m).replace(g,"-ms-")}function r(e){for(var t=5381,n=e.length;n--;)t=33*t^e.charCodeAt(n);return(t>>>0).toString(36)}function i(e,t){return"number"!=typeof t||0===t||w[e]?e+":"+t:e+":"+t+"px"}function s(e){return e.sort(function(e,t){return e[0]>t[0]?1:-1})}function o(e,r){for(var i=[],o=[],u=!1,h=0,c=Object.keys(e);h<c.length;h++){var f=c[h],l=e[f];null!==l&&void 0!==l&&(f===t.IS_UNIQUE?u=!0:"object"!=typeof l||Array.isArray(l)?i.push([n(f.trim()),l]):o.push([f.trim(),l]))}return{styleString:a(s(i)),nestedStyles:r?o:s(o),isUnique:u}}function a(e){return e.map(function(e){var t=e[0],n=e[1];return Array.isArray(n)?n.map(function(e){return i(t,e)}).join(";"):i(t,n)}).join(";")}function u(e,t){return e.indexOf("&")>-1?e.replace(v,t):t+" "+e}function h(e,t,n,r,i){var s=o(n,!!t),a=s.styleString,c=s.nestedStyles,f=s.isUnique,l=a;if(64===t.charCodeAt(0)){var d=e.add(new N(t,i?void 0:a,e.hash));if(a&&i){var y=d.add(new A(a,d.hash,f?"u"+(++p).toString(36):void 0));r.push([i,y])}for(var g=0,v=c;g<v.length;g++){var _=v[g],m=_[0],S=_[1];l+=m+h(d,m,S,r,i)}}else{var w=i?u(t,i):t;if(a){var y=e.add(new A(a,e.hash,f?"u"+(++p).toString(36):void 0));r.push([w,y])}for(var b=0,x=c;b<x.length;b++){var T=x[b],m=T[0],S=T[1];l+=m+h(e,m,S,r,w)}}return l}function c(e,n,r,i,s){for(var o=new R(e.hash),a=[],c=h(o,n,r,a),f="f"+o.hash(c),l=s?s+"_"+f:f,d=0,p=a;d<p.length;d++){var y=p[d],g=y[0],v=y[1],_=i?u(g,"."+t.escape(l)):g;v.add(new C(_,v.hash,void 0,c))}return{cache:o,pid:c,id:l}}function f(e){for(var t="",n=0;n<e.length;n++)t+=e[n];return t}function l(e,t,n){return new U(e,t,void 0,n)}var d=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var p=0;t.IS_UNIQUE="__DO_NOT_DEDUPE_STYLE__";for(var y=/[A-Z]/g,g=/^ms-/,v=/&/g,_=/[ !#$%&()*+,.\/;<=>?@[\]^`{|}~"'\\]/g,m=function(e){return"-"+e.toLowerCase()},S=["animation-iteration-count","box-flex","box-flex-group","column-count","counter-increment","counter-reset","flex","flex-grow","flex-positive","flex-shrink","flex-negative","font-weight","line-clamp","line-height","opacity","order","orphans","tab-size","widows","z-index","zoom","fill-opacity","stroke-dashoffset","stroke-opacity","stroke-width"],w=Object.create(null),b=0,x=["-webkit-","-ms-","-moz-","-o-",""];b<x.length;b++)for(var T=x[b],I=0,O=S;I<O.length;I++){var j=O[I];w[T+j]=!0}t.escape=function(e){return e.replace(_,"\\$&")},t.hyphenate=n,t.stringHash=r;var k={add:function(){},change:function(){},remove:function(){}},R=function(){function e(e,t){void 0===e&&(e=r),void 0===t&&(t=k),this.hash=e,this.changes=t,this.sheet=[],this.changeId=0,this._keys=[],this._children=Object.create(null),this._counters=Object.create(null)}return e.prototype.add=function(t){var n=this._counters[t.id]||0,r=this._children[t.id]||t.clone();if(this._counters[t.id]=n+1,0===n)this._children[r.id]=r,this._keys.push(r.id),this.sheet.push(r.getStyles()),this.changeId++,this.changes.add(r,this._keys.length-1);else{if(r.getIdentifier()!==t.getIdentifier())throw new TypeError("Hash collision: "+t.getStyles()+" === "+r.getStyles());var i=this._keys.indexOf(t.id),s=this._keys.length-1,o=this.changeId;if(i!==s&&(this._keys.splice(i,1),this._keys.push(t.id),this.changeId++),r instanceof e&&t instanceof e){var a=r.changeId;r.merge(t),r.changeId!==a&&this.changeId++}this.changeId!==o&&(i===s?this.sheet.splice(i,1,r.getStyles()):(this.sheet.splice(i,1),this.sheet.splice(s,0,r.getStyles())),this.changes.change(r,i,s))}return r},e.prototype.remove=function(t){var n=this._counters[t.id];if(n>0){this._counters[t.id]=n-1;var r=this._children[t.id],i=this._keys.indexOf(r.id);if(1===n)delete this._counters[t.id],delete this._children[t.id],this._keys.splice(i,1),this.sheet.splice(i,1),this.changeId++,this.changes.remove(r,i);else if(r instanceof e&&t instanceof e){var s=r.changeId;r.unmerge(t),r.changeId!==s&&(this.sheet.splice(i,1,r.getStyles()),this.changeId++,this.changes.change(r,i,i))}}},e.prototype.merge=function(e){for(var t=0,n=e._keys;t<n.length;t++){var r=n[t];this.add(e._children[r])}return this},e.prototype.unmerge=function(e){for(var t=0,n=e._keys;t<n.length;t++){var r=n[t];this.remove(e._children[r])}return this},e.prototype.clone=function(){return new e(this.hash).merge(this)},e}();t.Cache=R;var C=function(){function e(e,t,n,r){void 0===n&&(n="s"+t(e)),void 0===r&&(r=""),this.selector=e,this.hash=t,this.id=n,this.pid=r}return e.prototype.getStyles=function(){return this.selector},e.prototype.getIdentifier=function(){return this.pid+"."+this.selector},e.prototype.clone=function(){return new e(this.selector,this.hash,this.id,this.pid)},e}();t.Selector=C;var A=function(e){function t(t,n,r){void 0===r&&(r="c"+n(t));var i=e.call(this,n)||this;return i.style=t,i.hash=n,i.id=r,i}return d(t,e),t.prototype.getStyles=function(){return this.sheet.join(",")+"{"+this.style+"}"},t.prototype.getIdentifier=function(){return this.style},t.prototype.clone=function(){return new t(this.style,this.hash,this.id).merge(this)},t}(R);t.Style=A;var N=function(e){function t(t,n,r,i,s){void 0===n&&(n=""),void 0===i&&(i="a"+r(t+"."+n)),void 0===s&&(s="");var o=e.call(this,r)||this;return o.rule=t,o.style=n,o.hash=r,o.id=i,o.pid=s,o}return d(t,e),t.prototype.getStyles=function(){return this.rule+"{"+this.style+f(this.sheet)+"}"},t.prototype.getIdentifier=function(){return this.pid+"."+this.rule+"."+this.style},t.prototype.clone=function(){return new t(this.rule,this.style,this.hash,this.id,this.pid).merge(this)},t}(R);t.Rule=N;var U=function(n){function i(t,i,s,o){void 0===t&&(t=r),void 0===i&&(i=void 0!==e&&"production"!==e.env.NODE_ENV),void 0===s&&(s="f"+(++p).toString(36));var a=n.call(this,t,o)||this;return a.hash=t,a.debug=i,a.id=s,a}return d(i,n),i.prototype.registerStyle=function(e,t){var n=this.debug?t:void 0,r=c(this,"&",e,!0,n),i=r.cache,s=r.id;return this.merge(i),s},i.prototype.registerKeyframes=function(e,t){return this.registerHashRule("@keyframes",e,t)},i.prototype.registerHashRule=function(e,n,r){var i=this.debug?r:void 0,s=c(this,"",n,!1,i),o=s.cache,a=s.pid,u=s.id,h=new N(e+" "+t.escape(u),void 0,this.hash,void 0,a);return this.add(h.merge(o)),u},i.prototype.registerRule=function(e,t){this.merge(c(this,e,t,!1).cache)},i.prototype.registerCss=function(e){this.merge(c(this,"",e,!1).cache)},i.prototype.getStyles=function(){return f(this.sheet)},i.prototype.getIdentifier=function(){return this.id},i.prototype.clone=function(){return new i(this.hash,this.debug,this.id,this.changes).merge(this)},i}(R);t.FreeStyle=U,t.create=l}).call(t,n(4))},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(e){return!!e}).join(" ")}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,s=e;r<s.length;r++){var o=s[r];if(null!=o&&!1!==o)for(var a in o){var u=o[a];(u||0===u)&&("$nest"===a&&u?n[a]=n.$nest?i(n.$nest,u):u:-1!==a.indexOf("&")||0===a.indexOf("@media")?n[a]=n[a]?i(n[a],u):u:n[a]=u)}}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.raf="undefined"==typeof requestAnimationFrame?function(e){return setTimeout(e)}:"undefined"==typeof window?requestAnimationFrame:requestAnimationFrame.bind(window),t.classes=r,t.extend=i,t.media=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=[];e.type&&r.push(e.type),e.orientation&&r.push("(orientation: "+e.orientation+")"),e.minWidth&&r.push("(min-width: "+s(e.minWidth)+")"),e.maxWidth&&r.push("(max-width: "+s(e.maxWidth)+")"),e.minHeight&&r.push("(min-height: "+s(e.minHeight)+")"),e.maxHeight&&r.push("(max-height: "+s(e.maxHeight)+")");var o="@media "+r.join(" and ");return{$nest:(a={},a[o]=i.apply(void 0,t),a)};var a};var s=function(e){return"string"==typeof e?e:e+"px"}},function(e,t,n){"use strict";function r(e){var t=new i.TypeStyle({autoGenerateTag:!1});return e&&t.setStylesTarget(e),t}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3);t.TypeStyle=i.TypeStyle;var s=n(6);t.types=s;var o=n(1);t.extend=o.extend,t.classes=o.classes,t.media=o.media;var a=new i.TypeStyle({autoGenerateTag:!0});t.setStylesTarget=a.setStylesTarget,t.cssRaw=a.cssRaw,t.cssRule=a.cssRule,t.forceRenderStyles=a.forceRenderStyles,t.fontFace=a.fontFace,t.getStyles=a.getStyles,t.keyframes=a.keyframes,t.reinit=a.reinit,t.style=a.style,t.stylesheet=a.stylesheet,t.createTypeStyle=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(5),s=n(1),o=function(){return r.create(void 0,!0)},a=function(){function e(e){var t=e.autoGenerateTag,n=this;this.cssRaw=function(e){e&&(n._raw+=e||"",n._pendingRawChange=!0,n._styleUpdated())},this.cssRule=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=i.ensureStringObj(s.extend.apply(void 0,t)).result;n._freeStyle.registerRule(e,o),n._styleUpdated()},this.forceRenderStyles=function(){var e=n._getTag();e&&(e.textContent=n.getStyles())},this.fontFace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=n._freeStyle,i=0,s=e;i<s.length;i++){var o=s[i];r.registerRule("@font-face",o)}n._styleUpdated()},this.getStyles=function(){return(n._raw||"")+n._freeStyle.getStyles()},this.keyframes=function(e){var t=i.explodeKeyframes(e),r=t.keyframes,s=t.$debugName,o=n._freeStyle.registerKeyframes(r,s);return n._styleUpdated(),o},this.reinit=function(){var e=o();n._freeStyle=e,n._lastFreeStyleChangeId=e.changeId,n._raw="",n._pendingRawChange=!1;var t=n._getTag();t&&(t.textContent="")},this.setStylesTarget=function(e){n._tag&&(n._tag.textContent=""),n._tag=e,n.forceRenderStyles()},this.stylesheet=function(e){for(var t=Object.getOwnPropertyNames(e),r={},i=0,s=t;i<s.length;i++){var o=s[i],a=e[o];a&&(a.$debugName=o,r[o]=n.style(a))}return r};var r=o();this._autoGenerateTag=t,this._freeStyle=r,this._lastFreeStyleChangeId=r.changeId,this._pending=0,this._pendingRawChange=!1,this._raw="",this._tag=void 0,this.style=this.style.bind(this)}return e.prototype._afterAllSync=function(e){var t=this;this._pending++;var n=this._pending;s.raf(function(){n===t._pending&&e()})},e.prototype._getTag=function(){if(this._tag)return this._tag;if(this._autoGenerateTag){var e="undefined"==typeof window?{textContent:""}:document.createElement("style");return"undefined"!=typeof document&&document.head.appendChild(e),this._tag=e,e}},e.prototype._styleUpdated=function(){var e=this,t=this._freeStyle.changeId,n=this._lastFreeStyleChangeId;(this._pendingRawChange||t!==n)&&(this._lastFreeStyleChangeId=t,this._pendingRawChange=!1,this._afterAllSync(function(){return e.forceRenderStyles()}))},e.prototype.style=function(){var e=this._freeStyle,t=i.ensureStringObj(s.extend.apply(void 0,arguments)),n=t.result,r=t.debugName,o=r?e.registerStyle(n,r):e.registerStyle(n);return this._styleUpdated(),o},e}();t.TypeStyle=a},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function s(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function o(){y&&d&&(y=!1,d.length?p=d.concat(p):g=-1,p.length&&a())}function a(){if(!y){var e=i(o);y=!0;for(var t=p.length;t;){for(d=p,p=[];++g<t;)d&&d[g].run();g=-1,t=p.length}d=null,y=!1,s(e)}}function u(e,t){this.fun=e,this.array=t}function h(){}var c,f,l=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,p=[],y=!1,g=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||y||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=h,l.addListener=h,l.once=h,l.off=h,l.removeListener=h,l.removeAllListeners=h,l.emit=h,l.prependListener=h,l.prependOnceListener=h,l.listeners=function(e){return[]},l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){var t={},n="";for(var i in e){var o=e[i];if("$unique"===i)t[s.IS_UNIQUE]=o;else if("$nest"===i){var a=o;for(var u in a){var h=a[u];t[u]=r(h).result}}else"$debugName"===i?n=o:t[i]=o}return{result:t,debugName:n}}function i(e){var t={$debugName:void 0,keyframes:{}};for(var n in e){var r=e[n];"$debugName"===n?t.$debugName=r:t.keyframes[n]=r}return t}Object.defineProperty(t,"__esModule",{value:!0});var s=n(0);t.ensureStringObj=r,t.explodeKeyframes=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}])});